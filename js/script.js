
var data = [
		{
			'title' : 'Vase of Flowers, 1722. Jan van Huysum (Dutch, 1682–1749). Oil on panel, 99.1 x 81 (39 x 31 7/8 in.). The J. Paul Getty Museum, 82.PB.7<br>On view in gallery E203',
			'description' : 'Jan van Huysum’s exquisite bouquets of flowers from different seasons were prized for their loose, asymmetrical arrangements that reflect the period’s emerging taste for freer, graceful forms.',
			'frames' : [
				{
					'title' : 'Frame No 1-1',
					'textMatch_header' : 'A perfect match!',
					'textMatch_body': 'This gilded Régence frame currently surrounds Van Huysum’s Vase of Flowers. Its sculpted corners and curling tendrils complement the painting’s exuberance and would have been favored by eighteenth-century French and Dutch collectors.',
					'frame_corner_imgUrl' : 'img/painting_1_frame_1_corner.png',
					'frame_imgUrl' : 'img/painting_1_frame_1.png',
					'margin_top' : '88px',
					'margin_left' : '32px'
				}, {
					'title' : 'Frame No 1-2',
					'textMatch_header' : 'A very Dutch choice!',
					'textMatch_body' : 'This 17th century Dutch frame in expensive polished fruitwood provides a plainer, darker border to the sumptuous bouquet. Preferred by some Getty curators for its simplicity, it has been used periodically to frame Van Huysum’s still life.',
					'frame_corner_imgUrl' : 'img/painting_1_frame_2_corner.png',
					'frame_imgUrl' : 'img/painting_1_frame_2.png',
					'margin_top' : '',
					'margin_left' : ''
				}, {
					'title' : 'Frame No 1-3',
					'textMatch_header' : 'Oh dear, too severe!',
					'textMatch_body' : 'The elegant simplicity of this Louis XVI scotia frame by Chérin provides a less sympathetic surrounding for the Vase of Flowers. The frame’s linearity constrains and detracts from the dynamism of Van Huysum’s botanical forms.',
					'frame_corner_imgUrl' : 'img/painting_1_frame_3_corner.png',
					'frame_imgUrl' : 'img/painting_1_frame_3.png',
					'margin_top' : '',
					'margin_left' : ''
				}
			]
		}, {
			'title' : 'Mars and Venus, Allegory of Peace, 1770. Louis-Jean François Lagrenée (French, 1725–1805). Oil on canvas, 85.1 x 74.3 cm (33 1/2 x 29 1/4 in.). The J. Paul Getty Museum, 97.PA.65<br>On view in the exhibition',
			'description' : 'Lagrenée’s polished style and contrasts of rich color create a quiet and sensual portrayal of the god of war observing his sleeping lover, the goddess Venus. ',
			'frames' : [
				{
					'title' : 'Frame No 2-1',
					'textMatch_header' : 'Complementary classicism',
					'textMatch_body' : 'You’ve selected the current Louis XVI frame, which is contemporary with the painting. The repeated pattern of the egg-and-dart motif provides a regularity that reinforces the calm mood of the scene.',
					'frame_corner_imgUrl' : 'img/painting_2_frame_1_corner.png',
					'frame_imgUrl' : 'img/painting_2_frame_1.png',
					'margin_top' : '',
					'margin_left' : ''
				}, {
					'title' : 'Frame No 2-2',
					'textMatch_header' : 'Over-the-top revival',
					'textMatch_body' : 'The painting arrived at the Getty in this gaudy Louis XVI revival frame that broadcasts the artist’s name at the top. Its heavy forms and brassy color clash with the subtlety of Lagrenée’s painting.',
					'frame_corner_imgUrl' : 'img/painting_2_frame_2_corner.png',
					'frame_imgUrl' : 'img/painting_2_frame_2.png',
					'margin_top' : '',
					'margin_left' : ''
				}, {
					'title' : 'Frame No 2-3',
					'textMatch_header' : 'Oof! Overpowering!',
					'textMatch_body' : 'As a leading exponent of restrained classicism, Lagrenée would have strongly opposed this showy Louis XV frame. Its curving edges compete with the contained composition of the central image. ',
					'frame_corner_imgUrl' : 'img/painting_2_frame_3_corner.png',
					'frame_imgUrl' : 'img/painting_2_frame_3.png',
					'margin_top' : '',
					'margin_left' : ''
				}
			]
		}, {
			'title' : 'Spring (Jeanne Demarsy), 1881. Édouard Manet (French, 1832–1883). Oil on canvas, 98.7 x 75.9 cm (38 7/8 x 29 7/8 in.). The J. Paul Getty Museum, 2014.62<br>On view in Gallery W204',
			'description' : 'Manet portrayed the young actress Jean Demarsy in a floral-patterned gown against a leafy backdrop as an allegory of Spring. His forthright technique and colorful palette give the painting immediacy and freshness.',
			'frames' : [
				{
					'title' : 'Frame No 3-1',
					'textMatch_header' : 'Perfectly suited to the Salon',
					'textMatch_body' : 'You’ve selected a French 19th century gilded "Salon" frame, named for the annual Paris exhibition where Spring was first shown in 1882. The plain sight edge creates a window onto the composition, while the ornamentation resonates with Manet’s lively brushwork. ',					
					'frame_corner_imgUrl' : 'img/painting_3_frame_1_corner.png',
					'frame_imgUrl' : 'img/painting_3_frame_1.png',
					'margin_top' : '',
					'margin_left' : ''
				}, {
					'title' : 'Frame No 3-2',
					'textMatch_header' : 'Showstopper',
					'textMatch_body' : 'Spring was in this Louis XV frame for many years—perhaps over a century. The boisterous curves and exuberant ornamentation call attention to the painting but also compete with its varied brushwork and bold color.',
					'frame_corner_imgUrl' : 'img/painting_3_frame_2_corner.png',
					'frame_imgUrl' : 'img/painting_3_frame_2.png',
					'margin_top' : '',
					'margin_left' : ''
				}, {
					'title' : 'Frame No 3-3',
					'textMatch_header' : 'Botanical overload',
					'textMatch_body' : 'The richly carved botanical motifs of the Louis XIII frame may seem to further embellish the painting, but the heavy Baroque forms of this garland are at odds with Manet’s bright palette and light, energetic brushwork.',
					'frame_corner_imgUrl' : 'img/painting_3_frame_3_corner.png',
					'frame_imgUrl' : 'img/painting_3_frame_3.png',
					'margin_top' : '',
					'margin_left' : ''
				}
			]
		}, {
			'title' : 'Suzanne Le Peletier de Saint –Fargeau, 1804. Jacques-Louis David (French, 1748–1825). Oil on canvas, 83.2 x 73 cm (32 3/4 x 28 3/4 in.). The J. Paul Getty Museum, 97.PA.36<br>On view in Gallery S204',
			'description' : 'Both the sitter and the painter were strong supporters of Emperor Napoleon. David’s informal yet direct presentation of the sitter created a strikingly intimate portrait intended for her fiancée. ',
			'frames' : [
				{
					'title' : 'Frame No 4-1',
					'textMatch_header' : 'Harmonious ensemble',
					'textMatch_body' : 'You’ve chosen the current frame in the Empire style, carved and gilded in France during the early 19th century. The elegant scrolling-leaf band and palmette corners were common during the Napoleonic Empire and fit the status of both painter and sitter.',
					'frame_corner_imgUrl' : 'img/painting_4_frame_1_corner.png',
					'frame_imgUrl' : 'img/painting_4_frame_1.png',
					'margin_top' : '',
					'margin_left' : ''
				}, {
					'title' : 'Frame No 4-2',
					'textMatch_header' : 'Hmmm. It’s … a frame.',
					'textMatch_body' : 'This plain Neoclassical frame postdates the painting by several decades. The choice of a previous owner, its simple, austere style contrasts with David’s descriptive brushwork and restrains the relaxed immediacy of the portrait.',					
					'frame_corner_imgUrl' : 'img/painting_4_frame_2_corner.png',
					'frame_imgUrl' : 'img/painting_4_frame_2.png',
					'margin_top' : '',
					'margin_left' : ''
				}, {
					'title' : 'Frame No 4-3',
					'textMatch_header' : 'Too, too ...',
					'textMatch_body' : 'You’ve selected a Louis XVI frame suitable for a portrait; however, the ribbon and flower ornaments are too ornate and crowds the head of David’s robust likeness.',					
					'frame_corner_imgUrl' : 'img/painting_4_frame_3_corner.png',
					'frame_imgUrl' : 'img/painting_4_frame_3.png',
					'margin_top' : '',
					'margin_left' : ''
				}
			]
		}
	];

var leftMenu = function() {
	$('.showroom').removeClass('showRight').toggleClass('showLeft');
	$('.painting_position img').attr('src', 'img/painting_placeholder.png');
	$('.frame_position img').attr('src', 'img/frame_placeholder.png');
	$('#label').hide();
	$('#description').removeClass('show');
	$('#textMatch').removeClass('show');
}

var rightMenu = function() {
	$('.showroom').removeClass('showLeft').toggleClass('showRight');
	$('.frame_position img').attr('src', 'img/frame_placeholder.png');
	$('#textMatch').removeClass('show');
}

$('.leftMenu').on('click', function() {
	leftMenu();
})

$('.rightMenu').on('click', function(e) {
	
	var src = $('.painting_position img').attr('src');

	if ( src.indexOf("placeholder") > -1 ) {
		e.preventDefault();
	} else {
		rightMenu();
	}
})

// show the left menu
$('#showroom').addClass('showLeft');


( function() {

	var body = document.body,
		paintingSelection = document.getElementById( 'painting-menu' ),
		frameSelection = document.getElementById( 'frame-menu' ),
		droppablePainting = [],
		droppableFrame = [];

	// initialize droppable for paintings
	var el = document.querySelector( '#showroom .wall .painting_position' );
	droppablePainting =  new Droppable( el , {
		// options...
	});

	// initialize draggable paintings
	Array.prototype.slice.call(document.querySelectorAll( '#painting-menu .painting' )).forEach( function( el ) {
		
		new Draggable( el, droppablePainting, {
			
			draggabilly : { containment: body },
			onStart : function() {
				// close the left menu
				leftMenu();
			},
			onEnd : function( wasDropped ) {
				var afterDropFn = function() {
					// hide showroom
					if (!wasDropped) {
						leftMenu();
					} else {
						// show frame menu after 1.5s
						setTimeout(function() {
							rightMenu();
						}, 1500);
						
						// show
						$('#label').fadeIn();
						$('#description').addClass('show');
						
						var src = el.getAttribute("src"),
							index = el.getAttribute('data-index');

						$('.painting_position img').attr("src", src);

						$('#label .text').html(data[index].title);
						$('#description').html(data[index].description);

						var frame_data = data[index].frames;

						var loadFrames = function(src, index) {
							var frame = "";
							for (var i = 0; i < frame_data.length; i++ ) {
								frame += '<div><img src="' + frame_data[i].frame_corner_imgUrl + '" data-index="' + i + '" class="frame" /></div><div class="frame_info"><div class="frame_title">' + frame_data[i].title + '</div></div>';
							};
							$('#frames').html(frame);

							// initialize droppableFrame
							var el = document.querySelector( '#showroom .wall .frame_position' );
							droppableFrame =  new Droppable( el , {
								onHover : function() {
									return false;
								}
							});

							console.log(droppableFrame.options.onHover());



							// initialize draggable frames
							[].slice.call(document.querySelectorAll( '#frames .frame' )).forEach( function( el ) {
								new Draggable( el, droppableFrame, {
									draggabilly : { containment: body },
									onStart : function() {
										rightMenu();
									},
									onEnd : function( wasDropped ) {
										var afterDropFn = function() {
											// hide dropArea
											if (!wasDropped) {
												rightMenu();
											} else {
												var index = el.getAttribute('data-index'),
													src = frame_data[index].frame_imgUrl,
													margin_top = frame_data[index].margin_top,
													margin_left = frame_data[index].margin_left;

												$('.frame_position img').attr("src", src).css({ marginTop: margin_top, marginLeft: margin_left});
												
												// display the selection text
												var textMatch_header = '<h2>' + frame_data[index].textMatch_header + '</h2>',
													textMatch_body = frame_data[index].textMatch_body;
												
												$('#textMatch').html( textMatch_header + textMatch_body );
												$('#textMatch').addClass('show');
											}
										}
										afterDropFn(); // afterDropFn for frames
									} // on End for frames
								});
							});
						};
						loadFrames(src, index); // load frames
					}
				}
			afterDropFn(); // afterDropFn for paintings
			} // on End for paintings
		});
	}); // Draggable for paintings
})();